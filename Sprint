var sprintTick = 1;
var spon = 1;
var activity = com.mojang.minecraftpe.MainActivity.currentMainActivity.get();
var buttonWindow = null;
var button = new android.widget.Button(activity);


function newLevel()
{
activity.runOnUiThread(new java.lang.Runnable({ run: function() {
    
        try { 
          buttonWindow = new android.widget.PopupWindow();
          
          var layout = new android.widget.RelativeLayout(activity);

          
          button.setText("~"); 
          
          button.setOnClickListener(new android.view.View.OnClickListener({
                
                onClick: function(viewarg) {
                    if(spon == 1)
                      {
                        spon = 2;
                        clientMessage("Sprint On");
                      }
                    else if(spon == 2)
                      {
                         spon = 1;
                         clientMessage("Sprint Off");
                      }

                  }
          }));
          layout.addView(button);
          buttonWindow.setContentView(layout);
          buttonWindow.setWidth(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
          buttonWindow.setHeight(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
          
          buttonWindow.setBackgroundDrawable(new
android.graphics.drawable.ColorDrawable(android.graphics.Color.BLACK));
          
          buttonWindow.showAtLocation(activity.getWindow().getDecorView(), android.view.Gravity.CENTER | android.view.Gravity.TOP, 0, 0);
          }catch(problem){
          print("Button could not be displayed: " + problem); //Print our error if we failed to make the button
        }
  }}));
}

function modTick()
{
if(spon == 2)
{
if(sprintTick == 1) {
			Xpos = Player.getX();
			Zpos = Player.getZ();
			sprintTick++;
		} if(sprintTick == 3) {
			sprintTick = 1;
			Xdiff = Player.getX() - Xpos;
			Zdiff = Player.getZ() - Zpos;
			Entity.setVelX(Player.getEntity(),Xdiff);
			Entity.setVelZ(Player.getEntity(),Zdiff);
			Xdiff = 0;
			Zdiff = 0;
		} if(sprintTick != 1) {
			sprintTick++;
		}
}else if(spon == 1)
{
  sprintTick = 1;
}
}

function leaveGame()
{
var activity = com.mojang.minecraftpe.MainActivity.currentMainActivity.get();
  activity.runOnUiThread(new java.lang.Runnable({ run: function() {
        if(buttonWindow != null) { 
          buttonWindow.dismiss(); 
          buttonwindow = null;
        }
  }}));
}
